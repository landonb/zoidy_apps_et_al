---

# Ensure that Go is setup, for other tasks to use/rely upon.

- name: Load role to Install Go Language
  include_role:
    name: zoidy_home-fries
    tasks_from: golang-go-lang
    apply:
      tags:
        - golang-go-lang
        # A number of other tasks rely on Go being available.
        - cli-direnv
        - cli-ripgrep
        - golang-delve-debugger
        - golang-go-get-packages
        # (lb): dubs-vim is from my personal playbook.
        - dubs-vim
  tags:
    - golang-go-lang
    - cli-direnv
    - cli-ripgrep
    - golang-delve-debugger
    - golang-go-get-packages
    - dubs-vim

# *** Verify GH SSH setup.

- name: Determine if github.com is a known host
  # (lb): Huh: If we use &> here, and not 2>&1, return code is 0, not nonzero.
  # E.g.,
  #   shell: ssh-keygen -F github.com &> /dev/null
  shell: ssh-keygen -F github.com >/dev/null 2>&1
  register: gh_known
  ignore_errors: yes
  tags: always

- fail: msg="Please setup the machine's GitHub SSH key first, please!"
  when: gh_known.rc != 0
  tags: always

